# **CityInfoAPI - ASP.NET Core 8**

## **Project Overview**

CityInfoAPI is a RESTful API built using C# and ASP.NET Core 8 to manage a cities info. The API follows the MVC approach, implementing CRUD operations (POST, GET, PUT, DELETE) with concepts such as route groups, input validation, extension methods, data transfer objects (DTO), dependency injection, singleton pattern, securing and documenting the API, testing and deploying the API.

The project utilizes SQL Server with ASP.NET configuration and .NET Secret Manager to securely connect the API to the database. Entity Framework Core is employed as the ORM (Object-Relational Mapping) tool to facilitate querying and modifying the database using C# language. Additionally, the asynchronous programming model is adopted to enhance API performance and scalability.

## **Module 1: Getting Acquainted with ASP.NET Core**

- Introduction to ASP.NET Core:
    - Cross-platform, high-performance, open-source framework.
    - Designed for building modern, cloud-enabled, internet-connected applications.
- Versioning and Platform:
    - Initially ran on .NET Core platform.
    - .NET Core later renamed to .NET.
    - Skipped version 4 to avoid confusion with older full .NET framework.
    - Current state: ASP.NET Core 8 running on .NET 8.
- Creating ASP.NET Core Web Application:
    - Program class is the starting point, with the main method generated by the compiler.
    - The generated main method configures and runs the application.
    - Web application requires hosting; a web application builder is used.
    - Services collection on the builder allows adding and configuring services.
    - Services are added to the built-in dependency injection container.
    - Web application is built, resulting in an object of type WebApplication, implementing IApplicationBuilder.
    - IApplicationBuilder instances configure an application's request pipeline.
- Request Pipeline Configuration:
    - Components handling HTTP requests are called middleware.
    - Middleware can be scoped to different environments.
    - Middleware configuration defines how the application responds to individual HTTP requests.

## **Module 2: Creating the API and Returning Resources**

- Clarifying MVC Pattern:
    - MVC stands for Model View Controller.
    - Model: Handles application data logic.
    - View: Represents parts displaying data, typically in JSON format for APIs.
    - Controller: Manages interaction between View and Model.
    - Promotes reuse and better testability.
- HTTP Methods in API:
    - Use GET to retrieve data.
    - Routing maps request URI to controller method.
    - Other methods: POST for creating, PUT for updates, PATCH for partial updates, DELETE for deletion.
- Routing in APIs:
    - Attribute-based routing recommended over convention-based routing.
- Content Negotiation:
    - Process of selecting the best representation for a response.
    - Formatters handle serialization.
    - Media type in the Accept header value drives content negotiation.
- Returning Files:
    - Use ControllerBase method File for returning files.
    - Set correct media type on the response to inform the operating system.

## **Module 3: Manipulating Resources and Validating Input**

- Learning about POST for creating a resource:
    - Successful creation results in a 201 Created status code response.
    - First instance of submitting a request body to the API.
    - Request body format determined by the Contentâ€‘Type header.
- Input validation:
    - Introduction to input validation and data annotations on DTO classes.
    - Checking validation rules using ModelState, a dictionary containing model and model-binding validation state.
    - ModelState.IsValid property indicating validation success.
    - ApiController attribute automatically returns a Bad Request for validation failures.
- Updating a resource:
    - PUT for full updates, PATCH for partial updates.
    - JasonPatch standard for expressing a sequence of operations for partial updates.
    - Successful update response: No Content (204) or OK (200) status code.
- Deleting resources:
    - DELETE method used for resource deletion.
    - Successful deletion warrants a 204 status code.
- File uploads:
    - File uploads handled with POST method.
    - IFormFile class used to accept file uploads as a parameter.
    - Caution emphasized for supporting file uploads due to potential risks.

## **Module 4: Working with Services and Dependency Injection**

- Dependency Injection in ASP.NET Core:
    - Built-in dependency injection system.
    - Specialization of the inversion of control pattern.
    - Uses a container to initialize objects and provide required dependencies.
    - Loose coupling advantages: fewer code changes, better testability.
- Logging Functionality:
    - Implementation of logging using the built-in logger service.
    - Registration of custom services on the built-in container in the Program class.
- Service Lifetimes:
    - Transient lifetime: Created each time requested; suitable for lightweight, stateless services.
    - Scoped lifetime: Created once per request.
    - Singleton lifetime: Created the first time requested, subsequent requests use the same instance.
- Dependency Injection Usage:
    - Registering services on the container.
    - Injecting services using dependency injection into classes requiring instances.
- Configuration Files:
    - Use IConfiguration object to access configuration values.
    - Environment-specific configuration files by adding the environment name to the file name.